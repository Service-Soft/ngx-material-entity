<div [ngSwitch]="type" *ngIf="!(hideOmitForCreate && metadata.omitForCreate) && !(hideOmitForEdit && metadata.omitForUpdate)">
    <!-------------------------------------------->
    <!-----------------Strings-------------------->
    <!-------------------------------------------->
    <div *ngSwitchCase="DecoratorTypes.STRING">
        <string-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></string-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.STRING_TEXTBOX">
        <string-textbox-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></string-textbox-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.STRING_AUTOCOMPLETE">
        <string-autocomplete-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></string-autocomplete-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.STRING_DROPDOWN">
        <string-dropdown-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></string-dropdown-input>
    </div>

    <!-------------------------------------------->
    <!-----------------Booleans------------------->
    <!-------------------------------------------->
    <div *ngSwitchCase="DecoratorTypes.BOOLEAN_CHECKBOX">
        <boolean-checkbox-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></boolean-checkbox-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.BOOLEAN_TOGGLE">
        <boolean-toggle-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></boolean-toggle-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.BOOLEAN_DROPDOWN">
        <boolean-dropdown-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></boolean-dropdown-input>
    </div>

    <!-------------------------------------------->
    <!------------------Numbers------------------->
    <!-------------------------------------------->
    <div *ngSwitchCase="DecoratorTypes.NUMBER">
        <number-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></number-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.NUMBER_DROPDOWN">
        <number-dropdown-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></number-dropdown-input>
    </div>

    <!-------------------------------------------->
    <!-------------------Object------------------->
    <!-------------------------------------------->
    <div *ngSwitchCase="DecoratorTypes.OBJECT">
        <b>{{metadataDefaultObject.displayName}}</b>
        <!-- iterates over the object properties -->
        <div class="row" *ngFor="let row of objectPropertyRows">
            <ngx-mat-entity-input *ngFor="let key of row.keys; let i = index; trackBy: trackByFn"
                [entity]="objectProperty"
                [propertyKey]="key"
                [getValidationErrorMessage]="getValidationErrorMessage"
                [hideOmitForCreate]="hideOmitForCreate"
                [hideOmitForEdit]="hideOmitForEdit"
                class="col-lg-{{EntityUtilities.getWidth(objectProperty, key, 'lg')}} col-md-{{EntityUtilities.getWidth(objectProperty, key, 'md')}} col-sm-{{EntityUtilities.getWidth(objectProperty, key, 'sm')}}"
                (inputChangeEvent)="emitChange()"
            >
            </ngx-mat-entity-input>
        </div>
    </div>

    <!-------------------------------------------->
    <!-------------------Array-------------------->
    <!-------------------------------------------->
    <div class="entityArray" *ngSwitchCase="DecoratorTypes.ARRAY">
        <div class="mat-elevation-z8" style="border-radius: 5px;padding: 15px;margin-bottom: 15px;margin-top: 15px;">
            <div style="padding-bottom: 10px">
                <b>{{metadataEntityArray.displayName}}</b>
            </div>
            <div *ngIf="metadataEntityArray.createInline">
                <div class="row" *ngFor="let row of arrayItemInlineRows">
                    <ngx-mat-entity-input
                        *ngFor="let key of row.keys; let i = index; trackBy: trackByFn"
                        [entity]="arrayItem"
                        [propertyKey]="key"
                        [hideOmitForCreate]="true"
                        [getValidationErrorMessage]="getValidationErrorMessage"
                        class="col-lg-{{EntityUtilities.getWidth(arrayItem, key, 'lg')}} col-md-{{EntityUtilities.getWidth(arrayItem, key, 'md')}} col-sm-{{EntityUtilities.getWidth(arrayItem, key, 'sm')}}"
                        (inputChangeEvent)="checkIsArrayItemValid()"
                    >
                    </ngx-mat-entity-input>
                </div>
            </div>
            
            <div class="buttons">
                <button mat-raised-button
                    [disabled]="metadataEntityArray.createInline && !isArrayItemValid"
                    (click)="addEntity()">
                    {{metadataEntityArray.addButtonLabel}}
                </button>
                <button mat-raised-button
                    [disabled]="!selection.selected.length"
                    (click)="remove(selection, entityArrayValues, dataSource)">
                    {{metadataEntityArray.removeButtonLabel}}
                </button>
            </div>
        
            <mat-table [dataSource]="dataSource">
                <!-- select Column -->
                <ng-container matColumnDef="select">
                    <mat-header-cell *matHeaderCellDef>
                        <mat-checkbox [disabled]="!dataSource.data.length" (change)="$event ? masterToggle(selection, dataSource) : null" [checked]="selection.hasValue() && isAllSelected(selection, dataSource)" [indeterminate]="selection.hasValue() && !isAllSelected(selection, dataSource)"></mat-checkbox>
                    </mat-header-cell>
                    <mat-cell *matCellDef="let module">
                        <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(module) : null" [checked]="selection.isSelected(module)"></mat-checkbox>
                    </mat-cell>
                </ng-container>
            
                <ng-container *ngFor="let dCol of metadataEntityArray.displayColumns" [matColumnDef]="dCol.displayName">
                    <mat-header-cell *matHeaderCellDef>
                        {{dCol.displayName}}
                    </mat-header-cell>
                    <mat-cell class="entity" *matCellDef="let entity">
                        {{dCol.value(entity)}}
                    </mat-cell>
                </ng-container>
            
                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
            </mat-table>
        
            <div class="array-error" *ngIf="metadataEntityArray.required && !dataSource.data.length">
                {{metadataEntityArray.missingErrorMessage}}
            </div>
        </div>
    </div>

    <div *ngSwitchCase="DecoratorTypes.ARRAY_DATE">
        <array-date-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></array-date-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.ARRAY_DATE_TIME">
        <array-date-time-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></array-date-time-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.ARRAY_DATE_RANGE">
        <array-date-range-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></array-date-range-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.ARRAY_STRING_CHIPS">
        <array-string-chips-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></array-string-chips-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.ARRAY_STRING_AUTOCOMPLETE_CHIPS">
        <array-string-autocomplete-chips (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></array-string-autocomplete-chips>
    </div>

    <!-------------------------------------------->
    <!-------------------Dates-------------------->
    <!-------------------------------------------->
    <div *ngSwitchCase="DecoratorTypes.DATE">
        <date-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></date-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.DATE_RANGE">
        <date-range-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></date-range-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.DATE_TIME">
        <date-time-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></date-time-input>
    </div>

    <!-------------------------------------------->
    <!-------------------Files-------------------->
    <!-------------------------------------------->
    <div *ngSwitchCase="DecoratorTypes.FILE_DEFAULT">
        <file-default-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></file-default-input>
    </div>
    <div *ngSwitchCase="DecoratorTypes.FILE_IMAGE">
        <file-image-input (inputChangeEvent)="emitChange()" [entity]="entity" [key]="propertyKey" [getValidationErrorMessage]="getValidationErrorMessage"></file-image-input>
    </div>

    <div *ngSwitchDefault>ERROR: The type {{type}} is not known.</div>
</div>

<!--------------------------------------------------------->
<!--------------------Add Array Item Dialog---------------->
<!--------------------------------------------------------->
<ng-template #addArrayItemDialog>
    <h2 mat-dialog-title>{{dialogData.createDialogData.title}}</h2>

    <mat-dialog-content>
        <form #form="ngForm" class="row">
            <div class="row" *ngFor="let row of arrayItemDialogRows">
                <ngx-mat-entity-input
                    *ngFor="let key of row.keys"
                    [entity]="dialogData.entity"
                    [propertyKey]="key"
                    [hideOmitForCreate]="true"
                    [getValidationErrorMessage]="dialogData.getValidationErrorMessage"
                    class="col-lg-{{EntityUtilities.getWidth(dialogData.entity, key, 'lg')}} col-md-{{EntityUtilities.getWidth(dialogData.entity, key, 'md')}} col-sm-{{EntityUtilities.getWidth(dialogData.entity, key, 'sm')}}"
                    (inputChangeEvent)="checkIsDialogArrayItemValid()"
                >
                </ngx-mat-entity-input>
            </div>
        </form>
    </mat-dialog-content>

    <mat-dialog-actions>
        <button mat-raised-button (click)="addArrayItem()" [disabled]="!isDialogArrayItemValid">
            {{dialogData.createDialogData.createButtonLabel}}
        </button>
        <button mat-raised-button (click)="cancelAddArrayItem()" class="cancel-button">
            {{dialogData.createDialogData.cancelButtonLabel}}
        </button>
    </mat-dialog-actions>

</ng-template>